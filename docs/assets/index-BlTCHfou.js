import{FilesetResolver as x,HandLandmarker as v}from"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();let d=[],n=0,m,h,g,f=!1,y,c,s,u=[],p,w=-1;async function L(){const e=await x.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");p=await v.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:1})}new p5(e=>{e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight,e.WEBGL),c=e.height/3,s=e.min(e.width/2,c),e.angleMode(e.DEGREES),e.imageMode(e.CENTER),e.stroke("black"),e.strokeWeight(2),y=e.createCapture(e.VIDEO,{flipped:!0}),L()},e.draw=()=>{if(e.clear(),e.push(),p&&y){const r=document.querySelector("video");let t=performance.now();r.currentTime!==w&&r.currentTime&&(u=p.detectForVideo(r,t),w=r.currentTime)}e.push(),e.translate(-e.width/2,-e.height/2);const i=a();if(e.pop(),i){f&&(d=[],f=!1),n=n+2;let r=(i.x-e.width/2)*e.cos(n),t=i.y-e.height/2,o=(i.x-e.width/2)*e.sin(n);d.push([r,t,o]),m=e.rotationX,h=e.rotationY,g=e.rotationZ}else f=!!d.length,n+=.5,e.rotateX(e.rotationX-m),e.rotateY(e.rotationY-h),e.rotateZ(e.rotationZ-g);n==360&&(n=0),e.rotateY(n),e.beginShape(),e.noFill();for(let r=0;r<d.length;r++){let[t,o,l]=d[r];e.vertex(t,o,l)}e.endShape(),e.strokeWeight(1),e.line(s,0,0,-s,0,0),e.line(0,c,0,0,-c,0),e.pop()};function a(){if(u.landmarks)for(const i of u.landmarks){const r=i[4],t=i[8];for(const o of i);if(e.dist(r.x,r.y,t.x,t.y)<.1)return{x:(r.x+t.x)/2*e.width,y:(r.y+t.y)/2*e.height}}}});
